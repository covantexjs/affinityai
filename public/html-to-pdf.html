<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTML to PDF Converter</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      color: #333;
    }
    h1 {
      color: #6c5ce7;
      text-align: center;
      margin-bottom: 30px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      background-color: #6c5ce7;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      display: block;
      margin: 30px auto;
      width: 200px;
    }
    button:hover {
      background-color: #5b4bc4;
    }
    .card {
      background-color: #f8f9ff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .instructions {
      background-color: #f0e6ff;
      border-left: 4px solid #6c5ce7;
      padding: 15px;
      margin-bottom: 30px;
    }
    .note {
      background-color: #fff8e6;
      border-left: 4px solid #f6ad55;
      padding: 15px;
      margin-top: 30px;
    }
    #status {
      margin-top: 20px;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      display: none;
    }
    .loading {
      background-color: #ebf8ff;
      color: #2b6cb0;
      border: 1px solid #bee3f8;
    }
    .success {
      background-color: #f0fff4;
      color: #2f855a;
      border: 1px solid #c6f6d5;
    }
    .error {
      background-color: #fff5f5;
      color: #c53030;
      border: 1px solid #fed7d7;
    }
  </style>
</head>
<body>
  <h1>HTML to PDF Converter</h1>
  
  <div class="instructions">
    <p>This page converts HTML content to a PDF document using a server-side function. Fill in the form below and click "Generate PDF" to create your PDF.</p>
  </div>
  
  <div class="card">
    <form id="pdfForm">
      <div class="form-group">
        <label for="archetypeName">Archetype Name:</label>
        <input type="text" id="archetypeName" name="archetypeName" value="Romantic Idealist" required>
      </div>
      
      <div class="form-group">
        <label for="archetypeTagline">Archetype Tagline:</label>
        <input type="text" id="archetypeTagline" name="archetypeTagline" value="Finding meaning in every connection" required>
      </div>
      
      <div class="form-group">
        <label for="compatibleWith">Compatible With:</label>
        <input type="text" id="compatibleWith" name="compatibleWith" value="Steady Guardian & Vibrant Explorer" required>
      </div>
      
      <div class="form-group">
        <label for="customerName">Your Name (optional):</label>
        <input type="text" id="customerName" name="customerName" placeholder="Enter your name">
      </div>
      
      <button type="submit">Generate PDF</button>
    </form>
    
    <div id="status"></div>
  </div>
  
  <div class="note">
    <p><strong>How it works:</strong> This tool generates HTML content based on your inputs, then sends that HTML to a server-side function that converts it to a PDF document. The PDF is then downloaded to your device.</p>
  </div>
  
  <script>
    // Function to generate HTML template
    function generateHtmlTemplate(archetypeName, archetypeTagline, compatibleWith, customerName) {
      const currentDate = new Date().toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      return `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>${archetypeName} Love Blueprint</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
              color: #333;
            }
            .page {
              page-break-after: always;
              margin-bottom: 30px;
            }
            h1 {
              color: #6c5ce7;
              text-align: center;
              font-size: 24px;
            }
            h2 {
              color: #6c5ce7;
              font-size: 20px;
              border-bottom: 1px solid #ddd;
              padding-bottom: 10px;
            }
            h3 {
              color: #333;
              font-size: 18px;
            }
            p {
              line-height: 1.6;
            }
            .highlight {
              background-color: #f0e6ff;
              padding: 15px;
              border-left: 4px solid #6c5ce7;
              margin: 20px 0;
            }
            .couples-cta {
              background-color: #f0e6ff;
              padding: 15px;
              border-radius: 5px;
              margin: 20px 0;
            }
            .couples-cta h3 {
              color: #6c5ce7;
              margin-top: 0;
            }
            .compatibility {
              background-color: #f0fff4;
              padding: 15px;
              border-radius: 5px;
              margin: 20px 0;
            }
            .compatibility h3 {
              color: #38a169;
              margin-top: 0;
            }
            .radar {
              text-align: center;
              margin: 30px 0;
              padding: 20px;
              background-color: #f8f9ff;
              border-radius: 5px;
            }
            .radar-description {
              text-align: center;
              font-style: italic;
              margin-top: 10px;
            }
            ul {
              margin-left: 20px;
            }
            li {
              margin-bottom: 10px;
            }
            .footer {
              text-align: center;
              font-size: 12px;
              color: #999;
              margin-top: 30px;
            }
          </style>
        </head>
        <body>
          <!-- Page 1: Cover -->
          <div class="page">
            <h1 style="font-size: 36px; margin-top: 100px;">Love Blueprint</h1>
            <h2 style="text-align: center; border: none;">Your AI-Enhanced Relationship Profile</h2>
            <h1 style="color: #fd79a8; font-size: 30px; margin-top: 50px;">${archetypeName}</h1>
            <p style="text-align: center; font-style: italic; color: #6c5ce7; font-size: 18px;">"${archetypeTagline}"</p>
            ${customerName ? `<p style="text-align: center; margin-top: 100px;">Prepared for ${customerName}</p>` : ''}
            <p style="text-align: center; color: #999;">${currentDate}</p>
          </div>

          <!-- Page 2: Overview -->
          <div class="page">
            <h2>Your Unique Love Profile</h2>
            <p>
              As a ${archetypeName}, you bring a unique perspective to relationships that combines emotional depth, authenticity, and meaningful connection. 
              Your approach to love is deeply personal and meaningful.
            </p>
            
            <div class="highlight">
              <p>
                As a ${archetypeName}, you don't just experience loveâ€”you create meaningful connections that become the foundation of your personal story and identity. Your approach to relationships is both deeply personal and universally resonant.
              </p>
            </div>

            <h2>Your Relationship Strengths</h2>
            <p>
              These key strengths define how you show up in relationships and what makes you a valuable partner:
            </p>
            <ul>
              <li>Deep emotional intelligence and empathy</li>
              <li>Ability to create meaningful connections</li>
              <li>Strong commitment to authentic relationships</li>
              <li>Natural storytelling ability that enriches relationships</li>
              <li>Capacity for profound emotional intimacy</li>
            </ul>

            <h2>Compatibility Overview</h2>
            <div class="compatibility">
              <h3>Your Perfect Match</h3>
              <p>
                You naturally connect well with: ${compatibleWith}
              </p>
              <p>
                In real-world terms, you'll likely click with people who are spontaneous and adventurous (Vibrant Explorer types) or those who provide stability and reliability (Steady Guardian types). These personalities balance your thoughtful, meaning-focused approach with either exciting new experiences or grounding practicality.
              </p>
            </div>
            
            <!-- Couples CTA - Added to Page 2 -->
            <div class="couples-cta">
              <h3>Want to compare this with your partner's archetype?</h3>
              <p>
                Try Couples Mode to discover how your archetypes interact and get personalized insights for your relationship. Visit affinityai.me/couples to get started.
              </p>
            </div>

            <div class="footer">Generated by Affinity AI - Your guide to deeper connections</div>
          </div>

          <!-- Page 3: Communication -->
          <div class="page">
            <h2>Your Communication Style</h2>
            <p>
              As a ${archetypeName}, your way of talking and listening is unique. You naturally go beyond small talk to create meaningful conversations that build real connection.
            </p>
            
            <h3>Your Communication Superpowers</h3>
            <ul>
              <li>Expressing emotions with clarity and authenticity</li>
              <li>Active listening with genuine empathy</li>
              <li>Creating safe spaces for vulnerable conversations</li>
              <li>Understanding emotional subtext and nuance</li>
            </ul>
            
            <h3>Communication Blind Spots</h3>
            <ul>
              <li>Being direct about practical needs</li>
              <li>Discussing mundane topics without losing interest</li>
              <li>Addressing conflicts before they escalate</li>
            </ul>

            <div class="highlight">
              <p>
                Pro Tip: Your depth of communication is a gift. When you need something practical (like deciding where to eat or setting a schedule), try being direct and specific rather than hoping your partner will sense what you need. Save the poetic language for the emotional moments where it truly shines.
              </p>
            </div>

            <h2>Your Conflict Style</h2>
            <p>
              When disagreements happen, you tend to focus on feelings first. Instead of jumping to solutions, you want to make sure everyone feels heard and understood.
            </p>
            
            <p>
              This approach has real benefits - it creates emotional safety and deeper understanding. But sometimes it can leave practical problems unsolved or drag conflicts out longer than necessary.
            </p>
            
            <div class="highlight">
              <p>
                Try This: When conflicts arise, start by saying "I hear you and I understand how you feel" to create emotional safety. Then add "Let's figure out a solution together" to move toward resolution. This two-step approach honors both emotional needs and practical problem-solving.
              </p>
            </div>

            <div class="footer">Generated by Affinity AI - Your guide to deeper connections</div>
          </div>

          <!-- Page 4: Compatibility Radar -->
          <div class="page">
            <h2>Your Compatibility Radar</h2>
            <p>
              This visualization shows your natural compatibility with different relationship archetypes. The further the point extends outward on each axis, the stronger the compatibility.
            </p>
            
            <!-- Compatibility Radar Chart (Text Version) -->
            <div class="radar">
              <h3>Compatibility Percentages:</h3>
              <p>Steady Guardian: 85%</p>
              <p>Mindful Architect: 80%</p>
              <p>Compassionate Nurturer: 75%</p>
              <p>Vibrant Explorer: 85%</p>
              
              <p class="radar-description">
                The radar visualization would show your strongest connections with Steady Guardian and Vibrant Explorer archetypes, with slightly lower but still strong compatibility with Mindful Architect and Compassionate Nurturer archetypes.
              </p>
            </div>
            
            <p>
              Understanding your compatibility patterns can help you recognize potential strengths and challenges in different relationships. Remember that compatibility is just one factor in relationship success - growth, communication, and shared values are equally important.
            </p>
            
            <div class="highlight">
              <p>
                The most fulfilling relationships often involve complementary differences, not just similarities. Look for partners who share your core values but bring different strengths to balance your natural tendencies.
              </p>
            </div>
            
            <!-- Couples CTA -->
            <div class="couples-cta">
              <h3>Want to compare with your partner?</h3>
              <p>
                Try Couples Mode to discover how your archetypes interact and get personalized insights for your relationship.
              </p>
            </div>

            <div class="footer">Generated by Affinity AI - Your guide to deeper connections</div>
          </div>

          <!-- Page 5: Conversation Starters -->
          <div class="page">
            <h2>Conversation Starters for Deeper Connection</h2>
            <p>
              These questions are designed specifically for your communication style. Use them to create meaningful conversations with potential partners or deepen existing relationships.
            </p>
            
            <h3>Questions to Ask Your Partner</h3>
            <ul>
              <li>"What's a moment from your childhood that still influences how you love?"</li>
              <li>"If our relationship were a book, what would this chapter be about?"</li>
              <li>"What's something beautiful you noticed about us this week?"</li>
              <li>"How do you imagine we'll look back on this time in our lives?"</li>
              <li>"What's a dream you have for us that you haven't shared yet?"</li>
            </ul>
            
            <h3>Questions for Established Relationships</h3>
            <ul>
              <li>"What does emotional safety mean to you in a relationship?"</li>
              <li>"How do you like to celebrate meaningful moments together?"</li>
              <li>"What's your favorite way to show love without using words?"</li>
            </ul>
            
            <p>
              These questions align with your natural desire for meaningful connection. They invite the kind of depth and authenticity that you value in relationships. Use them when you want to move beyond surface-level conversation into the territory of real connection.
            </p>

            <div class="footer">Generated by Affinity AI - Your guide to deeper connections</div>
          </div>

          <!-- Page 6: Action Steps -->
          <div class="page">
            <h2>Your Action Plan</h2>
            <p>
              Putting these insights into action will help you create the meaningful relationships you desire. Here are practical steps you can take:
            </p>

            <h3>This Week: Quick Wins</h3>
            <ul>
              <li>Share one meaningful story from your past with someone you care about</li>
              <li>Practice expressing a practical need directly</li>
              <li>Notice and appreciate one 'ordinary' moment of connection</li>
              <li>Ask someone a deep conversation starter from this report</li>
            </ul>

            <h3>This Month: Building New Patterns</h3>
            <ul>
              <li>Establish a weekly ritual of connection</li>
              <li>Practice setting one small boundary while maintaining openness</li>
              <li>Reflect on your relationship patterns</li>
              <li>Plan an activity that aligns with your authentic interests</li>
            </ul>

            <h3>Long-term: Sustained Growth</h3>
            <ul>
              <li>Develop consistent emotional self-care practices</li>
              <li>Learn to appreciate practical expressions of love</li>
              <li>Build resilience by reframing challenges as growth opportunities</li>
              <li>Continue exploring compatibility with different personality types</li>
            </ul>

            <div class="highlight">
              <p>
                Remember: Your depth and emotional intelligence are gifts. The right person will treasure these qualities, not ask you to diminish them. Trust in your ability to create the meaningful connection you seek.
              </p>
            </div>

            <!-- Final Couples CTA -->
            <div class="couples-cta">
              <h3>Ready to explore your relationship compatibility?</h3>
              <p>
                Try Couples Mode to discover how your archetypes interact and get personalized insights for your relationship. Visit affinityai.me/couples to get started.
              </p>
            </div>

            <p style="text-align: center; margin-top: 30px; font-size: 16px; color: #6c5ce7; font-weight: bold;">
              Thank you for taking this journey of self-discovery. May your love story be everything you dream it can be.
            </p>

            <div class="footer">Generated by Affinity AI - Your guide to deeper connections</div>
          </div>
        </body>
        </html>
      `;
    }

    // Form submission handler
    document.getElementById('pdfForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const statusEl = document.getElementById('status');
      statusEl.className = 'loading';
      statusEl.textContent = 'Generating PDF...';
      statusEl.style.display = 'block';
      
      try {
        // Get form values
        const archetypeName = document.getElementById('archetypeName').value;
        const archetypeTagline = document.getElementById('archetypeTagline').value;
        const compatibleWith = document.getElementById('compatibleWith').value;
        const customerName = document.getElementById('customerName').value || undefined;
        
        // Generate HTML content
        const htmlContent = generateHtmlTemplate(archetypeName, archetypeTagline, compatibleWith, customerName);
        
        // Create filename
        const filename = `${archetypeName.toLowerCase().replace(/\s+/g, '-')}-love-blueprint.pdf`;
        
        // Send HTML to server for PDF conversion
        const response = await fetch('/.netlify/functions/generate-pdf-html', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            html: htmlContent,
            filename: filename
          }),
        });
        
        if (!response.ok) {
          throw new Error(`Server returned ${response.status}: ${response.statusText}`);
        }
        
        // Get the PDF as a blob
        const blob = await response.blob();
        
        // Create a URL for the blob
        const url = URL.createObjectURL(blob);
        
        // Create a link element
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        
        // Append to the document, click it, and remove it
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        // Clean up the URL object
        setTimeout(() => URL.revokeObjectURL(url), 1000);
        
        // Update status
        statusEl.className = 'success';
        statusEl.textContent = 'PDF generated successfully!';
      } catch (error) {
        console.error('Error generating PDF:', error);
        
        // Update status
        statusEl.className = 'error';
        statusEl.textContent = `Error: ${error.message}`;
      }
    });
  </script>
</body>
</html>

